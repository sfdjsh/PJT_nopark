## 1 자율주행 소개



- 자율주행 자동차의 필요성?

  - 전 세계적으로 자율주행은 큰이슈, 빠르게 발전중.
  - 미 도로교통국에 따르면 운전자의 실수가 차량 사고 원인의 90%
  - 운전자가 운전에 개입하지 않을 경우 사고는 줄어들 것이라 기대

- 자율 주행 단계적 구분

  - 레벨0 : 운전자가 모든 차량을 제어
  - 레벨1 : 자율주행 시스템은 운전자를 보조
  - 레벨2 : 시스템이 조향과 속도를 제어
  - 레벨3 : 비상시에만 운전자가 개입, 제한된 조건에서 차량이 자율적 주행
  - 레벨4 : 운전석이 필요없으며, 시스템이 특정지역에서 자율주행으로 운행
  - 레벨5: 레벨4와 같지만 전지역
  - 현재 자율주행은 2~3단계

- 자율주행 3단계 핵심기술

  - 인지: 주변 상황에 대한 정확한 인식
  - 판단: 인식에 기반한 정확한 판단
  - 제어: 판단에 기반한 올바른 제어

- 핵심기술(인지)

  ``` object detection
  ##  object detection
  - 어떤 이미지가 입력으로 주어졌을 때, 해당 객체를 인식하고 분류해주는 기술
  - classfiication : 이미지에 따라서 labeling 해주는 것
  - Localization: 이미지에 객체가 어디에 있는지 bounding box를 만들어 주는것
  - detetion: 이미지 내의 여러 이미지를 찾아내는 것
  - 딥러능을 활용한 기술을 사용
  ```

  ```
  ## 정밀도로 지도
  - 자율주행 등에 필요한 정보를 3차원으로 제작한 전자 지도
  - 차선, 도로시설, 표지시설
  - 해상도 0.25m
  - PointCloud Map, HD Map, Grid Map
  
  ```

  ```
  ## 인지에 사용되는 센서
  - 카메라
  - 라이다 : 레이저를 매개체로 사물간 거리 및 형태 파악
  		  정밀하지만, 비싸고 외부 환경에 영향 많이 받음
  - 레이더 : 전파를 매개체로 사물간 거리 및 형태 파악
  		  정밀도는 떨어지지만 소형화가 가능, 보다 저렴하고 악천후에 강함
  ```

- 핵심기술(판단/제어)

  ```
  ## 경로계획
  - 차량이 장애물을 회피하면서 목표지점까지 최적의 경로로 도달하게 하는 기술
  - 전역 경로계획
  - 지역 경로계획
  - 대표적으로 pure pursuit guidance가 있음
  
  ## 속도 제어
  - 제어인식 및 판단 결과에 따른 자율주행 시스템의 작동
  - 전방차량 추종을 위한 거리 및 속도 제어
  - 대표적으로 pid 제어
  ```



## 자율주행 원리

자율주행 자동차는 위에서 정리한듯이 인지-판단-제어의 3단계를 거치며 작동하나다.

인지 단계에서는 센서로 주변 환경을 인지, 판단단계에서는 인지된 환경 정보를 해석하고 안전한 주행 경로 생성,

제어단계는 판단에서 나온 경로를 추종하도록 하는 가,감속 조향 제어 이를 해결하기 위해 인공지능기술이 많이 활용

(ex 카메라 or 센서들로 부터 들어온 빨간 불을 인지 빨간 불이면 멈춰야 된다고 판단, 그 후 그에 맞게 브레이크로 제어)



## 센서 소개

- 자율주행 센서
  - 자율주행에서 센서는 사람의 눈 역할
  - 센서의 종류
  - 인지를 위한 센서 : 카메라 , 라이다, 레이더
  - 위치센서 : GPS, IMU

## ROS

- ROS는 Robot Operating System의 약어

- 통신 기본 개념

  

| Topic                                  | service                          |
| -------------------------------------- | -------------------------------- |
| 단반향, 비동기 통신                    | 양방향 동기 통신                 |
| Publisher : Message 송신               | Service Client : Service 요청    |
| Subscriber : Message 수시              | Service Server : Service 응답    |
| 지속적으로 발생하는 송 수신에 적합     | 클라이언트 요청 후 서버에서 응답 |
| 1: N , 1: 1, N : 1, N:N 모두 통신 가능 | 요청과 응답이 끊기면 노드 종료   |

ex) 차량에 기어를 바꿔라 > Service가 적합, 몇 초간 액셀 패달을 밟아라 > Topic 적합



## CNN



Fully Connected Layer만으로 구성된 인공 신경망의 입력 데이터는 1차원(배열) 형태

 한 장의 컬러 사진은 3차원 데이터이므로 이미지 데이터로 전연결(FC, Fully Connected) 신경망을 학습시켜야 할 경우에, 3차원 사진 데이터를 1차원으로 변환시켜여한다.

 사진 데이터를 평면화 시키는 과정에서 공간 정보가 손실.

 결과적으로 이미지 공간 정보 유실로 인한 정보 부족으로 인공 신경망이 특징을 추출 및 학습이 비효율적이고 정확도를 높이는데 한계가 있다.(입력데이터를 얼굴 사진이라 가정하면 1차원 배열로 바꿀시 우리 눈 코 입 위치 정보를 잃게 됨)

 이미지의 공간 정보를 유지한 상태로 학습이 가능한 모델이 바로 CNN.

CNN(Convolutional Neural Network)은 기존 Fully Connected Neural Network와의 차이점

- 각 레이어의 입출력 데이터의 형상 유지
- 이미지의 공간 정보를 유지하면서 인접 이미지와의 특징을 효과적으로 인식
- 복수의 필터로 이미지의 특징 추출 및 학습
- 추출한 이미지의 특징을 모으고 강화하는 Pooling 레이어
- 필터를 공유 파라미터로 사용하기 때문에, 일반 인공 신경망과 비교하여 학습 파라미터가 매우 적음

CNN은 위 이미지와 같이 이미지의 특징을 추출하는 부분과 클래스를 분류하는 부분으로 나눌 수 있다.

 특징 추출 영역은 Convolution Layer와 Pooling Layer를 여러 겹 쌓는 형태로 구성

 Convolution Layer는 입력 데이터에 필터를 적용 후 활성화 함수를 반영하는 필수 요소

CNN 마지막 부분에는 이미지 분류를 위한 Fully Connected 레이어가 추가

 이미지의 특징을 추출하는 부분과 이미지를 분류하는 부분 사이에 이미지 형태의 데이터를 배열 형태로 만드는 Flatten 레이어가 위치



참고 http://taewan.kim/post/cnn/
